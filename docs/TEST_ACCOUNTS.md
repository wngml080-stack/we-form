# 테스트 계정 정보

## 📋 계정 목록

| 역할 | 이메일 | 비밀번호 | 소속 회사 | 소속 지점 | 권한 범위 |
|------|--------|---------|----------|----------|-----------|
| **마스터** | a29979910@gmail.com | test1234! | - | - | 모든 회사/지점 |
| **본사** | loo920@naver.com | test1234! | 부티크짐 | - | 부티크짐 전체 지점 |
| **지점장** | kongkong9922@naver.com | test1234! | 부티크짐 | 강남점 | 강남점만 |
| **직원** | thdus545@naver.com | test1234! | 부티크짐 | 강남점 | 강남점만 (제한적) |

---

## 🔐 역할별 권한 상세

### 1. 마스터 (system_admin)
**이메일:** a29979910@gmail.com

**접근 권한:**
- ✅ 모든 회사 조회/생성/수정
- ✅ 모든 지점 조회/생성/수정
- ✅ 모든 직원 조회/관리
- ✅ 모든 회원 데이터 조회/관리
- ✅ 모든 스케줄 조회/생성
- ✅ 모든 결제/회원권 조회
- ✅ 시스템 로그 조회

**제한 사항:** 없음

---

### 2. 본사 (company_admin)
**이메일:** loo920@naver.com
**소속:** 부티크짐

**접근 권한:**
- ✅ 부티크짐 회사 정보 조회
- ✅ 부티크짐의 모든 지점 조회/생성/수정
- ✅ 부티크짐의 모든 직원 조회/관리
- ✅ 부티크짐의 모든 회원 조회/관리
- ✅ 부티크짐의 모든 스케줄 조회/생성
- ✅ 부티크짐의 모든 결제/회원권 조회/관리
- ✅ 부티크짐의 시스템 로그 조회

**제한 사항:**
- ❌ 다른 회사 데이터 접근 불가
- ❌ 회사 생성/삭제 불가

---

### 3. 지점장 (admin)
**이메일:** kongkong9922@naver.com
**소속:** 부티크짐 - 강남점

**접근 권한:**
- ✅ 강남점 정보 조회
- ✅ 강남점 직원 조회/관리
- ✅ 강남점 회원 조회/관리
- ✅ 강남점 스케줄 조회/생성
- ✅ 강남점 결제/회원권 조회/관리
- ✅ 강남점 출석 조회/처리
- ✅ 강남점 급여 설정 조회/관리

**제한 사항:**
- ❌ 다른 지점 데이터 접근 불가
- ❌ 지점 생성/삭제 불가
- ❌ 회사 정보 수정 불가
- ❌ 시스템 로그 조회 불가

---

### 4. 직원 (staff)
**이메일:** thdus545@naver.com
**직책:** 필라전임
**소속:** 부티크짐 - 강남점

**접근 권한:**
- ✅ 강남점 정보 **조회만**
- ✅ 강남점 직원 **조회만**
- ✅ 강남점 회원 **조회만**
- ✅ 강남점 스케줄 조회/생성
- ✅ 강남점 결제/회원권 **조회만**
- ✅ 강남점 출석 조회/처리
- ✅ 강남점 급여 설정 **조회만**

**제한 사항:**
- ❌ 다른 지점 데이터 접근 불가
- ❌ 회원 정보 수정 불가
- ❌ 직원 정보 수정 불가
- ❌ 결제/회원권 생성/수정 불가
- ❌ 급여 설정 수정 불가
- ❌ 지점 정보 수정 불가
- ❌ 시스템 로그 조회 불가

---

## 🧪 역할별 테스트 시나리오

### 마스터 계정 테스트
```
1. 로그인: a29979910@gmail.com / test1234!
2. 확인 사항:
   - 시스템 관리 페이지 접근 가능
   - 모든 회사 목록 조회
   - 모든 지점 목록 조회
   - 회사 생성/수정 가능
   - 지점 생성/수정 가능
```

### 본사 계정 테스트
```
1. 로그인: loo920@naver.com / test1234!
2. 확인 사항:
   - 부티크짐 회사만 보임
   - 부티크짐의 모든 지점 보임 (강남점, 향후 추가 지점들)
   - 지점 생성 버튼 활성화
   - 부티크짐 직원 전체 조회 가능
   - 시스템 로그 조회 가능
```

### 지점장 계정 테스트
```
1. 로그인: kongkong9922@naver.com / test1234!
2. 확인 사항:
   - 강남점만 보임 (다른 지점 안 보임)
   - 강남점 직원만 보임
   - 강남점 회원만 보임
   - 직원 등록 가능
   - 회원 등록/수정 가능
   - 시스템 로그 접근 불가
```

### 직원 계정 테스트
```
1. 로그인: thdus545@naver.com / test1234!
2. 확인 사항:
   - 강남점 데이터만 조회
   - 회원 정보 수정 버튼 비활성화 또는 오류
   - 직원 정보 수정 버튼 비활성화 또는 오류
   - 스케줄 생성 가능
   - 출석 체크 가능
```

---

## 🔧 RLS 정책 적용 상태

### 적용된 테이블 (13개)
1. ✅ companies - 회사
2. ✅ gyms - 지점
3. ✅ staffs - 직원
4. ✅ schedules - 스케줄
5. ✅ members - 회원
6. ✅ member_memberships - 회원권
7. ✅ member_payments - 결제
8. ✅ attendance_statuses - 출석상태
9. ✅ attendances - 출석기록
10. ✅ salary_settings - 급여설정
11. ✅ sales_logs - 매출로그
12. ✅ system_logs - 시스템로그
13. ✅ permission_requests - 권한요청

### RLS 정책 파일
- 위치: `/scripts/apply-rls-policies.sql`
- 총 라인 수: 646줄
- 적용일: 2025-12-05

---

## 🚨 계정 관련 주의사항

1. **비밀번호 보안**
   - 모든 테스트 계정 비밀번호: `test1234!`
   - 운영 환경에서는 반드시 강력한 비밀번호로 변경 필요

2. **마스터 계정 관리**
   - 마스터 계정은 최소한으로 유지
   - 실제 운영 시 개인 이메일보다 회사 공용 이메일 권장

3. **직원 퇴사 처리**
   - `employment_status`를 '퇴사'로 변경 시 모든 접근 차단
   - RLS 정책에서 자동으로 필터링됨

4. **회사 상태 관리**
   - `companies.status`가 'active'가 아니면 데이터 접근 제한
   - 회원 조회 시 회사 상태 체크됨

---

## 📞 문제 발생 시

### 로그인 안 될 때
```javascript
// 브라우저 콘솔에서 실행
localStorage.clear();
sessionStorage.clear();
location.reload();
```

### RLS 정책 재적용
```bash
# Supabase SQL Editor에서 실행
/scripts/apply-rls-policies.sql 파일 내용 복사 & 실행
```

### 테스트 데이터 초기화
```bash
# 스크립트 실행
node scripts/create-test-users-v2.mjs
```
